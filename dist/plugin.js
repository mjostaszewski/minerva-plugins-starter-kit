!function a(r,l,d){function s(t,e){if(!l[t]){if(!r[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(c)return c(t,!0);var o=new Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}var i=l[t]={exports:{}};r[t][0].call(i.exports,function(e){var n=r[t][1][e];return s(n||e)},i,i.exports,a,r,l,d)}return l[t].exports}for(var c="function"==typeof require&&require,e=0;e<d.length;e++)s(d[e]);return s}({1:[function(e,n,t){"use strict";var i=[],r=function(e,n){var t=document.head||document.getElementsByTagName("head")[0],o=i[i.length-1];if((n=n||{}).insertAt=n.insertAt||"bottom","top"===n.insertAt)o?o.nextSibling?t.insertBefore(e,o.nextSibling):t.appendChild(e):t.insertBefore(e,t.firstChild),i.push(e);else{if("bottom"!==n.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");t.appendChild(e)}};n.exports={createLink:function(e,n){var t=document.head||document.getElementsByTagName("head")[0],o=document.createElement("link");for(var i in o.href=e,o.rel="stylesheet",n)if(n.hasOwnProperty(i)){var a=n[i];o.setAttribute("data-"+i,a)}t.appendChild(o)},createStyle:function(e,n,t){t=t||{};var o=document.createElement("style");for(var i in o.type="text/css",n)if(n.hasOwnProperty(i)){var a=n[i];o.setAttribute("data-"+i,a)}o.sheet?(o.innerHTML=e,o.sheet.cssText=e,r(o,{insertAt:t.insertAt})):o.styleSheet?(r(o,{insertAt:t.insertAt}),o.styleSheet.cssText=e):(o.appendChild(document.createTextNode(e)),r(o,{insertAt:t.insertAt}))}}},{}],2:[function(e,n,t){var o=".starter-kit-container {\n  padding: 10px;\n  background-color: #bada55;\n}\n.btn-uniprot,\n.btn-pick-random,\n.btn-minerva,\n.btn-aliases {\n  margin-bottom: 5px;\n}\n";e("browserify-css").createStyle(o,{href:"src/css/styles.css"},{insertAt:"bottom"}),n.exports=o},{"browserify-css":1}],3:[function(e,n,t){"use strict";e("../css/styles.css");var o="starter-kit",i={selected:[],allBioEntities:[],pickedRandomly:void 0},a=void 0,r=void 0,l=function(e){var n;console.log("registering "+o+" plugin"),$(".tab-content").css("position","relative"),a=e,r=$(a.element),r.attr("id"),console.log("minerva object ",a),console.log("project id: ",a.project.data.getProjectId()),console.log("model id: ",a.project.data.getModels()[0].modelId),a.project.map.addListener({dbOverlayName:"search",type:"onSearch",callback:p}),a.project.map.addListener({object:"overlay",type:"onHide",callback:u}),a.project.map.addListener({object:"overlay",type:"onShow",callback:u}),(n=$('<div class="'+o+'-container"></div>').appendTo(r)).append('\n        <div class="panel panel-default panel-events">\n            <div class="panel-heading">Events (Select an element in the map)</div>\n            <div class="panel-body">                \n            </div>\n        </div>\n    '),n.append('<button type="button" class="btn-focus btn btn-primary btn-default btn-block">Focus</button>'),n.append('<button type="button" class="btn-highlight btn btn-primary btn-default btn-block">Highlight</button>'),n.append("<hr>"),n.append('<button type="button" class="btn-pick-random btn btn-primary btn-default btn-block">Retrieve random object from map</button>'),n.append('\n        <div class="panel panel-default panel-randomly-picked">\n            <div class="panel-heading">Randomly picked object</div>\n            <div class="panel-body">                \n            </div>\n        </div>\n    '),n.append('<button type="button" class="btn-focus-random btn btn-primary btn-default btn-block">Focus</button>'),n.append('<button type="button" class="btn-highlight-random btn btn-primary btn-default btn-block">Highlight</button>'),n.append("<hr>"),n.append("<h4>Query UniProt API</h4>"),n.append('<button type="button" class="btn-uniprot btn btn-primary btn-default btn-block">Retrieve from UniProt</button>'),n.append('\n        <div class="panel panel-default panel-uniprot">\n            <div class="panel-heading">Uniprot records for the picked object</div>\n            <div class="panel-body">\n                <code></code>\n            </div>\n        </div>\n    '),n.append("<hr>"),n.append("<h4>Query Minerva API</h4>"),n.append('\n        <form class="form-horizontal">\n            <div class="form-group">\n                <label class="col-sm-2 control-label">Address</label>\n                <div class="col-sm-10">\n                    <input class="input-minerva-address form-control" placeholder="https://minerva-dev.lcsb.uni.lu/minerva">\n                </div>\n            </div>\n            <div class="form-group">\n                <label class="col-sm-2 control-label">Project ID</label>\n                <div class="col-sm-10">\n                    <input class="input-minerva-projectid form-control" placeholder="sample2">\n                </div>\n            </div>                        \n        </form>\n        <button type="button" class="btn-minerva btn btn-primary btn-default btn-block">Retrieve from Minerva</button>\n        <div class="panel panel-default panel-minerva">\n            <div class="panel-heading">Names of elements</div>\n            <div class="panel-body">                \n            </div>\n        </div>\n    '),n.append("<hr>"),n.append("<h4>Show species by alias</h4>"),n.append('\n        <form class="form-horizontal">\n            <div class="col-sm-10">\n                <input class="input-aliases-to-higlight form-control" placeholder="species aliases">\n            </div>                        \n        </form>\n        <button type="button" class="btn-aliases btn btn-primary btn-default btn-block">Highlight</button>\n    '),n.find(".btn-highlight").on("click",function(){return m()}),n.find(".btn-focus").on("click",function(){return b()}),n.find(".btn-pick-random").on("click",function(){return function(){function n(){i.pickedRandomly=i.allBioEntities[Math.floor(Math.random()*i.allBioEntities.length)];var e=i.pickedRandomly.constructor.name+" - ";"Alias"===i.pickedRandomly.constructor.name?e+=i.pickedRandomly.getElementId()+" - "+i.pickedRandomly.getName():e+=""+i.pickedRandomly.getReactionId(),r.find(".panel-randomly-picked .panel-body").html(e)}0<i.allBioEntities.length?n():a.project.data.getAllBioEntities().then(function(e){i.allBioEntities=e,n()})}()}),n.find(".btn-highlight-random").on("click",function(){return m(!0)}),n.find(".btn-focus-random").on("click",function(){return b(!0)}),n.find(".btn-uniprot").on("click",function(){return e=r.find(".panel-randomly-picked .panel-body").text(),void $.ajax({type:"GET",url:"https://www.uniprot.org/uniprot/?query="+e+"&sort=score&columns=id,entry%20name,reviewed,protein%20names,3d,genes,organism,length&format=tab&limit=10"}).then(function(e){r.find(".panel-uniprot .panel-body code").text(e)});var e}),n.find(".btn-minerva").on("click",function(){return e=r.find(".input-minerva-address").val(),n=r.find(".input-minerva-projectid").val(),void $.getJSON(e+"/api/doLogin").then(function(){return $.getJSON(e+"/api/projects/"+n+"/models/")}).then(function(e){console.log("models"),r.find(".panel-minerva .panel-body").text(e)});var e,n}),n.find(".btn-aliases").on("click",function(){return n=[],r.find(".input-minerva-address").val().split(",").forEach(function(e){n.push({element:{id:e},type:"SURFACE",options:{color:"#00FF00",opacity:.5}})}),void a.project.map.showBioEntity(n);var n})},d=function(){return console.log("unregistering "+o+" plugin"),a.project.map.removeAllListeners(),a.project.map.getHighlightedBioEntities().then(function(e){return a.project.map.hideBioEntity(e)})},s=function(){return o},c=function(){return"1.0.0"};function p(e){i.selected=e[0];var n="";0<i.selected.length&&i.selected.forEach(function(e){"Alias"===e.constructor.name&&(n+="<div>"+e.getName()+" - "+e.getElementId()+"</div>")}),r.find(".panel-events .panel-body").html(n)}function u(e){a.project.map.getVisibleDataOverlays().then(function(e){for(var n=[],t="",o=0;o<e.length;o++)t+=e[o].getName()+",",e[o].getAliases().forEach(function(e){n.push({element:{id:e.id,modelId:e.getModelId(),type:"ALIAS"},type:"ICON"})});r.find(".panel-events .panel-body").html(t),console.log("overlays: ",e),a.project.map.showBioEntity(n)})}function m(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],n=[];e?i.pickedRandomly&&n.push({element:{id:i.pickedRandomly.id,modelId:i.pickedRandomly.getModelId(),type:i.pickedRandomly.constructor.name.toUpperCase()},type:"SURFACE",options:{color:"#00FF00",opacity:.5}}):i.selected.forEach(function(e){n.push({element:{id:e.id,modelId:e.getModelId(),type:"ALIAS"},type:"ICON"})}),a.project.map.showBioEntity(n)}function b(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];function n(e){"Alias"===e.constructor.name?a.project.map.fitBounds({modelId:e.getModelId(),x1:e.getX(),y1:e.getY(),x2:e.getX()+e.getWidth(),y2:e.getY()+e.getHeight()}):a.project.map.fitBounds({modelId:e.getModelId(),x1:e.getCenter().x,y1:e.getCenter().y,x2:e.getCenter().x,y2:e.getCenter().y})}!e&&0<i.selected.length&&n(i.selected[0]),e&&i.pickedRandomly&&n(i.pickedRandomly)}minervaDefine(function(){return{register:l,unregister:d,getName:s,getVersion:c}})},{"../css/styles.css":2}]},{},[3]);
